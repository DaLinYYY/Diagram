<mxfile host="app.diagrams.net" modified="2021-08-05T13:22:24.279Z" agent="5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/92.0.4515.131 Safari/537.36" etag="lSmtc_-rTQIotPMcsn8C" version="14.9.1" type="github">
  <diagram id="NQSqshK7L9YoWfsGswRf" name="第 1 页">
    <mxGraphModel dx="1122" dy="1564" grid="0" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="0" pageScale="1" pageWidth="850" pageHeight="1100" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="vHlvlCEoPqvWG63_71X9-49" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="vHlvlCEoPqvWG63_71X9-1" target="vHlvlCEoPqvWG63_71X9-47">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="vHlvlCEoPqvWG63_71X9-1" value="等待互相信号量" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="105" y="-6" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="vHlvlCEoPqvWG63_71X9-7" value="Y" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;exitPerimeter=0;" edge="1" parent="1" source="vHlvlCEoPqvWG63_71X9-3" target="vHlvlCEoPqvWG63_71X9-5">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="vHlvlCEoPqvWG63_71X9-33" value="N" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="vHlvlCEoPqvWG63_71X9-3" target="vHlvlCEoPqvWG63_71X9-14">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="vHlvlCEoPqvWG63_71X9-3" value="判断互斥量有没有被使用&lt;br&gt;lockCount&amp;lt;= 0&lt;br&gt;" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.decision;whiteSpace=wrap;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="60" y="168" width="210" height="100" as="geometry" />
        </mxCell>
        <mxCell id="vHlvlCEoPqvWG63_71X9-60" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="vHlvlCEoPqvWG63_71X9-5" target="vHlvlCEoPqvWG63_71X9-59">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="vHlvlCEoPqvWG63_71X9-5" value="&lt;ol&gt;&lt;li&gt;&lt;span&gt;mutex-&amp;gt;owner = currentTask;&lt;/span&gt;&lt;/li&gt;&lt;li&gt;mutex-&amp;gt;ownerOriginalPrio = currentTask-&amp;gt;prio;&lt;/li&gt;&lt;li&gt;mutex-&amp;gt;lockedCount++;&lt;/li&gt;&lt;/ol&gt;" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;align=left;" vertex="1" parent="1">
          <mxGeometry x="394" y="178.75" width="342" height="78.25" as="geometry" />
        </mxCell>
        <mxCell id="vHlvlCEoPqvWG63_71X9-53" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="1" source="vHlvlCEoPqvWG63_71X9-6">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1034.4705882352941" y="352.47058823529414" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="vHlvlCEoPqvWG63_71X9-6" value="mutex-&gt;lockedCount++;" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="394" y="322.75" width="151" height="60" as="geometry" />
        </mxCell>
        <mxCell id="vHlvlCEoPqvWG63_71X9-8" value="&lt;span style=&quot;color: rgb(0 , 0 , 0) ; font-family: &amp;#34;helvetica&amp;#34; ; font-size: 12px ; font-style: normal ; font-weight: 400 ; letter-spacing: normal ; text-align: left ; text-indent: 0px ; text-transform: none ; word-spacing: 0px ; background-color: rgb(255 , 255 , 255) ; display: inline ; float: none&quot;&gt;互斥量没有被使用&lt;/span&gt;" style="text;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="280" y="188" width="105" height="28" as="geometry" />
        </mxCell>
        <mxCell id="vHlvlCEoPqvWG63_71X9-9" value="&lt;span style=&quot;color: rgb(0, 0, 0); font-family: helvetica; font-size: 12px; font-style: normal; font-weight: 400; letter-spacing: normal; text-align: center; text-indent: 0px; text-transform: none; word-spacing: 0px; background-color: rgb(255, 255, 255); display: inline; float: none;&quot;&gt;互斥量已经被锁定&lt;/span&gt;" style="text;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="174.99666666666673" y="273.0033333333335" width="116" height="28" as="geometry" />
        </mxCell>
        <mxCell id="vHlvlCEoPqvWG63_71X9-16" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="vHlvlCEoPqvWG63_71X9-14" target="vHlvlCEoPqvWG63_71X9-6">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="vHlvlCEoPqvWG63_71X9-17" value="Y" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="vHlvlCEoPqvWG63_71X9-16">
          <mxGeometry x="-0.2659" y="3" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="vHlvlCEoPqvWG63_71X9-22" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="vHlvlCEoPqvWG63_71X9-14" target="vHlvlCEoPqvWG63_71X9-19">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="vHlvlCEoPqvWG63_71X9-23" value="N&amp;nbsp;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="vHlvlCEoPqvWG63_71X9-22">
          <mxGeometry x="-0.2976" y="-1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="vHlvlCEoPqvWG63_71X9-14" value="判断是否是&lt;br&gt;被自己锁定的" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.decision;whiteSpace=wrap;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="64" y="312.5" width="202" height="80.5" as="geometry" />
        </mxCell>
        <mxCell id="vHlvlCEoPqvWG63_71X9-18" value="是自己锁住的" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;" vertex="1" parent="1">
          <mxGeometry x="280" y="327" width="82" height="18" as="geometry" />
        </mxCell>
        <mxCell id="vHlvlCEoPqvWG63_71X9-40" value="Y" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="vHlvlCEoPqvWG63_71X9-19" target="vHlvlCEoPqvWG63_71X9-27">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="vHlvlCEoPqvWG63_71X9-44" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="vHlvlCEoPqvWG63_71X9-19" target="vHlvlCEoPqvWG63_71X9-43">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="vHlvlCEoPqvWG63_71X9-19" value="是否需要提高任务优先级&lt;br&gt;（优先级继承）" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.decision;whiteSpace=wrap;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="74" y="437" width="182" height="82" as="geometry" />
        </mxCell>
        <mxCell id="vHlvlCEoPqvWG63_71X9-24" value="不是自己锁住的" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;" vertex="1" parent="1">
          <mxGeometry x="168" y="398" width="94" height="18" as="geometry" />
        </mxCell>
        <mxCell id="vHlvlCEoPqvWG63_71X9-46" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="vHlvlCEoPqvWG63_71X9-25" target="vHlvlCEoPqvWG63_71X9-43">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="vHlvlCEoPqvWG63_71X9-25" value="&lt;ol&gt;&lt;li&gt;现将任务从就绪列表中移除&lt;/li&gt;&lt;li&gt;提高拥有互斥量任务的优先级&lt;/li&gt;&lt;li&gt;将提高后的拥有互斥量的任务重新加入优先级队列中&lt;/li&gt;&lt;/ol&gt;" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;align=left;" vertex="1" parent="1">
          <mxGeometry x="667" y="440" width="336" height="75" as="geometry" />
        </mxCell>
        <mxCell id="vHlvlCEoPqvWG63_71X9-35" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="vHlvlCEoPqvWG63_71X9-27" target="vHlvlCEoPqvWG63_71X9-25">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="vHlvlCEoPqvWG63_71X9-36" value="Y" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="vHlvlCEoPqvWG63_71X9-35">
          <mxGeometry x="-0.1722" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="vHlvlCEoPqvWG63_71X9-39" value="N" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="vHlvlCEoPqvWG63_71X9-27" target="vHlvlCEoPqvWG63_71X9-38">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="vHlvlCEoPqvWG63_71X9-27" value="任务处于就绪状态&lt;br&gt;owner-&amp;gt;state ==&amp;nbsp;eReady" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.decision;whiteSpace=wrap;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="394" y="434" width="212" height="87" as="geometry" />
        </mxCell>
        <mxCell id="vHlvlCEoPqvWG63_71X9-29" value="&lt;font style=&quot;font-size: 10px&quot; color=&quot;#3399ff&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;如果当前任务的优先级&lt;/span&gt;&lt;br style=&quot;font-size: 10px&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;比拥有者优先级更高，&lt;/span&gt;&lt;br style=&quot;font-size: 10px&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;则使用优先级继承&lt;/span&gt;&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;" vertex="1" parent="1">
          <mxGeometry x="258" y="483" width="130" height="46" as="geometry" />
        </mxCell>
        <mxCell id="vHlvlCEoPqvWG63_71X9-45" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="vHlvlCEoPqvWG63_71X9-38">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="165" y="628" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="vHlvlCEoPqvWG63_71X9-38" value="拥有互斥量的任务未在就绪列表中&lt;br&gt;就只需要更改优先级就可以了：&lt;br&gt;owner-&amp;gt;prio = currentTask-&amp;gt;prio;" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="396.5" y="593" width="207" height="70" as="geometry" />
        </mxCell>
        <mxCell id="vHlvlCEoPqvWG63_71X9-51" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="vHlvlCEoPqvWG63_71X9-43" target="vHlvlCEoPqvWG63_71X9-50">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="vHlvlCEoPqvWG63_71X9-43" value="将任务加入等待队列中" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="38.5" y="733" width="253" height="57" as="geometry" />
        </mxCell>
        <mxCell id="vHlvlCEoPqvWG63_71X9-48" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="vHlvlCEoPqvWG63_71X9-47" target="vHlvlCEoPqvWG63_71X9-3">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="vHlvlCEoPqvWG63_71X9-47" value="进入临界代码保护" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="78.5" y="88" width="173" height="42" as="geometry" />
        </mxCell>
        <mxCell id="vHlvlCEoPqvWG63_71X9-56" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="vHlvlCEoPqvWG63_71X9-50" target="vHlvlCEoPqvWG63_71X9-55">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="vHlvlCEoPqvWG63_71X9-50" value="退出临界代码保护" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="78.5" y="834" width="173" height="42" as="geometry" />
        </mxCell>
        <mxCell id="vHlvlCEoPqvWG63_71X9-58" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="vHlvlCEoPqvWG63_71X9-55" target="vHlvlCEoPqvWG63_71X9-57">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="vHlvlCEoPqvWG63_71X9-55" value="进行一次任务调度" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="78.5" y="915" width="173" height="42" as="geometry" />
        </mxCell>
        <mxCell id="vHlvlCEoPqvWG63_71X9-63" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="vHlvlCEoPqvWG63_71X9-57" target="vHlvlCEoPqvWG63_71X9-61">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="vHlvlCEoPqvWG63_71X9-57" value="&lt;ol&gt;&lt;li&gt;任务调度切换回来&lt;/li&gt;&lt;li&gt;返回任务的状态&lt;/li&gt;&lt;/ol&gt;" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;align=left;" vertex="1" parent="1">
          <mxGeometry x="78.5" y="990" width="173" height="42" as="geometry" />
        </mxCell>
        <mxCell id="vHlvlCEoPqvWG63_71X9-64" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="vHlvlCEoPqvWG63_71X9-59" target="vHlvlCEoPqvWG63_71X9-61">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1036" y="1011" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="vHlvlCEoPqvWG63_71X9-59" value="&lt;div&gt;&lt;ol&gt;&lt;li&gt;退出临界代码保护&lt;/li&gt;&lt;li&gt;&lt;span&gt;返回正常状态&lt;/span&gt;&lt;/li&gt;&lt;/ol&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;align=left;" vertex="1" parent="1">
          <mxGeometry x="949" y="828" width="173" height="50" as="geometry" />
        </mxCell>
        <mxCell id="vHlvlCEoPqvWG63_71X9-61" value="结束" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.start_1;whiteSpace=wrap;" vertex="1" parent="1">
          <mxGeometry x="558" y="981" width="100" height="60" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
